<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>CustomToStringBuilder.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Acme-Planner (Run) (2 Jun 2021 12:07:42)</a> &gt; <a href="../../index.html" class="el_group">Acme-Planner</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">acme.framework.utilities</a> &gt; <span class="el_source">CustomToStringBuilder.java</span></div><h1>CustomToStringBuilder.java</h1><pre class="source lang-java linenums">/*
 * CustomToStringBuilder.java
 *
 * Copyright (C) 2012-2021 Rafael Corchuelo.
 *
 * In keeping with the traditional purpose of furthering education and research, it is
 * the policy of the copyright owner to permit non-commercial use and redistribution of
 * this software. It has been tested carefully, but it is not guaranteed for any particular
 * purposes. The copyright owner does not offer any warranties or representations, nor do
 * they accept any liabilities with respect to them.
 */

package acme.framework.utilities;

import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.List;

import org.apache.commons.lang3.builder.ReflectionToStringBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;

<span class="nc bnc" id="L22" title="All 2 branches missed.">public class CustomToStringBuilder extends ReflectionToStringBuilder {</span>

	// Constructors -----------------------------------------------------------

	public CustomToStringBuilder(final Object object) {
<span class="nc" id="L27">		super(object);</span>

<span class="nc bnc" id="L29" title="All 4 branches missed.">		assert object != null;</span>
<span class="nc" id="L30">	}</span>

	public CustomToStringBuilder(final Object object, final ToStringStyle style) {
<span class="nc" id="L33">		super(object, style);</span>

<span class="nc bnc" id="L35" title="All 4 branches missed.">		assert object != null;</span>
<span class="nc bnc" id="L36" title="All 4 branches missed.">		assert style != null;</span>
<span class="nc" id="L37">	}</span>

	public CustomToStringBuilder(final Object object, final ToStringStyle style, final StringBuffer buffer) {
<span class="nc" id="L40">		super(object, style, buffer);</span>

<span class="nc bnc" id="L42" title="All 4 branches missed.">		assert object != null;</span>
<span class="nc bnc" id="L43" title="All 4 branches missed.">		assert style != null;</span>
<span class="nc bnc" id="L44" title="All 4 branches missed.">		assert buffer != null;</span>
<span class="nc" id="L45">	}</span>

	public CustomToStringBuilder(final Object object, final ToStringStyle style, final StringBuffer buffer, final Class&lt;?&gt; reflectUpToClass, final boolean outputTransients) {
<span class="nc" id="L48">		super(object, style, buffer);</span>

<span class="nc bnc" id="L50" title="All 4 branches missed.">		assert object != null;</span>
<span class="nc bnc" id="L51" title="All 4 branches missed.">		assert style != null;</span>
<span class="nc bnc" id="L52" title="All 4 branches missed.">		assert buffer != null;</span>
<span class="nc bnc" id="L53" title="All 4 branches missed.">		assert reflectUpToClass != null;</span>

<span class="nc" id="L55">		this.setUpToClass(reflectUpToClass);</span>
<span class="nc" id="L56">		this.setAppendTransients(outputTransients);</span>
<span class="nc" id="L57">	}</span>

	// Internal state ---------------------------------------------------------


<span class="nc" id="L62">	protected static CustomPrintStyle customQueryStyle = new CustomPrintStyle();</span>


	public static String toString(final Object object) {
		// assert object is nullable

		String result;
		StringBuffer buffer;
		CustomToStringBuilder builder;

<span class="nc bnc" id="L72" title="All 2 branches missed.">		if (object == null) {</span>
<span class="nc" id="L73">			result = &quot;&lt;null&gt;&quot;;</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">		} else if (CustomToStringBuilder.isPrimitive(object)) {</span>
<span class="nc" id="L75">			buffer = new StringBuffer();</span>
<span class="nc" id="L76">			buffer.append(object.getClass().getName());</span>
<span class="nc" id="L77">			buffer.append(&quot;{&quot;);</span>
<span class="nc" id="L78">			CustomToStringBuilder.customQueryStyle.appendObject(buffer, object);</span>
<span class="nc" id="L79">			buffer.append(&quot;}&quot;);</span>
<span class="nc" id="L80">			result = buffer.toString();</span>
<span class="nc" id="L81">		} else {</span>
<span class="nc" id="L82">			builder = new CustomToStringBuilder(object, CustomToStringBuilder.customQueryStyle);</span>
<span class="nc" id="L83">			result = builder.toString();</span>
		}

<span class="nc" id="L86">		return result;</span>
	}

	// Object interface -------------------------------------------------------

	@Override
	public String toString() {
		String result;
		Object obj;
		CustomPrintStyle style;
		StringBuffer buffer;
		Class&lt;?&gt; clazz;

<span class="nc" id="L99">		obj = this.getObject();</span>

<span class="nc bnc" id="L101" title="All 2 branches missed.">		if (obj == null) {</span>
<span class="nc" id="L102">			result = &quot;&lt;null&gt;&quot;; // super.getStyle().getNullText();</span>
<span class="nc" id="L103">		} else {</span>
<span class="nc" id="L104">			clazz = obj.getClass();</span>
<span class="nc" id="L105">			this.processSuperClazzes(clazz);</span>
<span class="nc" id="L106">			style = (CustomPrintStyle) this.getStyle();</span>
<span class="nc" id="L107">			buffer = this.getStringBuffer();</span>
<span class="nc" id="L108">			style.appendEnd(buffer, obj);</span>
<span class="nc" id="L109">			result = buffer.toString();</span>
		}

<span class="nc" id="L112">		return result;</span>
	}

	// Internal methods -------------------------------------------------------

	protected void processSuperClazzes(Class&lt;?&gt; clazz) {
<span class="nc bnc" id="L118" title="All 4 branches missed.">		assert clazz != null;</span>

		List&lt;Class&lt;?&gt;&gt; superClazzes;

<span class="nc" id="L122">		superClazzes = new ArrayList&lt;Class&lt;?&gt;&gt;();</span>
<span class="nc bnc" id="L123" title="All 4 branches missed.">		while (clazz != null &amp;&amp; clazz != this.getUpToClass()) {</span>
<span class="nc" id="L124">			superClazzes.add(clazz);</span>
<span class="nc" id="L125">			clazz = clazz.getSuperclass();</span>
		}

<span class="nc bnc" id="L128" title="All 2 branches missed.">		for (int i = superClazzes.size() - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L129">			clazz = superClazzes.get(i);</span>
<span class="nc" id="L130">			this.appendFieldsIn(clazz);</span>
		}
<span class="nc" id="L132">	}</span>

	protected static boolean isPrimitive(final Object object) {
		// assert obbject is nullable
		boolean result;

<span class="nc bnc" id="L138" title="All 14 branches missed.">		result = object instanceof String || object instanceof Number || object instanceof Character || object instanceof Boolean || object instanceof java.util.Date || object instanceof java.sql.Date || object instanceof Timestamp;</span>

<span class="nc" id="L140">		return result;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span>Acme-Planner (Run) (2 Jun 2021 12:07:42)</div></body></html>